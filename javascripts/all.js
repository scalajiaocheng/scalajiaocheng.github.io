jQuery(document).ready(function(){Footnotes.setup()});var Footnotes={footnotetimeout:false,setup:function(){var footnotelinks=jQuery("a[rel='footnote']");footnotelinks.unbind("mouseover",Footnotes.footnoteover);footnotelinks.unbind("mouseout",Footnotes.footnoteoout);footnotelinks.bind("mouseover",Footnotes.footnoteover);footnotelinks.bind("mouseout",Footnotes.footnoteoout)},footnoteover:function(){clearTimeout(Footnotes.footnotetimeout);jQuery("#footnotediv").stop();jQuery("#footnotediv").remove();var id=jQuery(this).attr("href").substr(1);var position=jQuery(this).offset();var div=jQuery(document.createElement("div"));div.attr("id","footnotediv");div.bind("mouseover",Footnotes.divover);div.bind("mouseout",Footnotes.footnoteoout);var el=document.getElementById(id);div.html(jQuery(el).html());div.html($(el).html());div.find("a[rev='footnote']").remove();div.css({position:"absolute",opacity:0.9});jQuery(document.body).append(div);var left=position.left;if(left+420>jQuery(window).width()+jQuery(window).scrollLeft()){left=jQuery(window).width()-420+jQuery(window).scrollLeft()}var top=position.top+20;if(top+div.height()>jQuery(window).height()+jQuery(window).scrollTop()){top=position.top-div.height()-15}div.css({left:left,top:top})},footnoteoout:function(){Footnotes.footnotetimeout=setTimeout(function(){jQuery("#footnotediv").animate({opacity:0},600,function(){jQuery("#footnotediv").remove()})},100)},divover:function(){clearTimeout(Footnotes.footnotetimeout);jQuery("#footnotediv").stop();jQuery("#footnotediv").css({opacity:0.9})}};$(function(){$(".monthly_archive_year_span").click(function(){$(this).parent().next().slideToggle("fast")})});var randomList=function(){if(!("entry_list" in window)){return}var nentries=entry_list.length;var rand=[];var rp=document.getElementById("random-posts-list");while(rp.firstChild){rp.removeChild(rp.firstChild)}var random_posts=5;if("jekyll_var" in window){random_posts=jekyll_var("random_posts")||random_posts}while(rand.length<random_posts&&rand.length<nentries){var r=Math.floor(Math.random()*nentries);if(rand.indexOf(r)!=-1){continue}var el=document.createElement("li");el.className="index_click_box";el.innerHTML=entry_list[r];rp.appendChild(el);rand.push(r)}var random_url=entry_list[Math.floor(Math.random()*nentries)].split('"click_box_link"')[1].split('"')[1];document.getElementById("random-link").onclick=function(){window.location=random_url;return false}};var setRandomList=function(){if(document.getElementById("random-shuffle")!=null){randomList();document.getElementById("random-shuffle").onclick=function(){randomList()}}};document.addEventListener("DOMContentLoaded",setRandomList);var relatedList=function(){if(!("related_list" in window)){return}var nentries=related_list.length;var rand=[];var rp=document.getElementById("related-posts-list");while(rp.firstChild){rp.removeChild(rp.firstChild)}var related_posts_show=nentries;if("jekyll_var" in window){related_posts_show=jekyll_var("related_posts_show")||related_posts_show}while(rand.length<related_posts_show&&rand.length<nentries){var r=Math.floor(Math.random()*nentries);if(rand.indexOf(r)!=-1){continue}var el=document.createElement("li");el.className="index_click_box";el.innerHTML=related_list[r];rp.appendChild(el);rand.push(r)}};document.addEventListener("DOMContentLoaded",relatedList);$(function(){$(".add_bookmark").click(function(){if(!$(this).data("page_title")||!$(this).data("page_url")){return addBookmark(document.title,location.href)}else{return addBookmark($(this).data("page_title"),$(this).data("page_url"))}});function addBookmark(title,url){var metaKey=(navigator.appVersion.indexOf("Mac")!=-1)?"CMD":"CTRL";if(navigator.userAgent.indexOf("MSIE")>-1){window.external.AddFavorite(title,url)}else{if(navigator.userAgent.indexOf("Firefox")>-1){alert("Push "+metaKey+"-D to add favorite!")}else{if(navigator.userAgent.indexOf("Opera")>-1){window.open(url,"sidebar","title="+title)}else{if(navigator.userAgent.indexOf("Flock")>-1){window.sidebar.addPanel(title,url,"")}else{if(navigator.userAgent.indexOf("Chrome")>-1){alert("Push "+metaKey+"-D to add favorite!")}else{if(navigator.userAgent.indexOf("Safari")>-1){alert("Push "+metaKey+"-D to add favorite!")}else{if(navigator.userAgent.indexOf("Lunascape")>-1){alert("Push "+metaKey+"-G to add favorite!")}else{alert("Please use the browser's bookmark function!")}}}}}}}}});var index_click_box=function(){var url=this.getElementsByClassName("click_box_link")[0].href;var p=this.parentNode;var name=p.id;if(typeof name=="undefined"){name=p.classList[0]}if(typeof name!="undefined"){ga("send","event","click_box",name,url)}window.location=url;return false};var add_index_click_box_link=function(){[].forEach.call(document.getElementsByClassName("index_click_box"),function(b){b.onclick=function(){var url=this.getElementsByClassName("click_box_link")[0].href;var p=this.parentNode;var name=p.id;if(typeof name=="undefined"||name==""){name=p.classList[0]}if(typeof name=="undefined"||name==""){name="no id or class"}ga("send","event","click_box",name,url);window.location=url;return false}})};document.addEventListener("DOMContentLoaded",add_index_click_box_link);$(function(){$("a[href^='http']").attr("target","_blank")});$(function(){$("img").each(function(){if($(this).parent()[0].nodeName.toLowerCase()!="a"){if($(this).hasClass("imglink")||$(this).attr("src").indexOf("/images/post/")==0){$(this).wrap($('<a href="'+$(this).attr("src")+'" />'))}}})});$(function(){if("jekyll_var" in window&&jekyll_var("n_scroll_fixed")!=null&&jekyll_var("n_scroll_fixed")>0){if(!$("body").hasClass("collapse-sidebar")){if($(".scroll-fixed").length>0){$(".scroll-fixed").exFlexFixed({watchPosition:true,container:"#content"})}}}});$(function(){if((!"jekyll_var" in window||!jekyll_var("mandrill"))&&!"ga" in window){return}$(document).on("copy",function(e){var selected="";if(typeof window.getSelection!="undefined"){var sel=window.getSelection();if(sel.rangeCount){var container=document.createElement("div");for(var i=0,len=sel.rangeCount;i<len;++i){container.appendChild(sel.getRangeAt(i).cloneContents())}selected=container.innerHTML}}else{if(typeof document.selection!="undefined"){if(document.selection.type=="Text"){selected=document.selection.createRange().htmlText}}}if(!selected){return}var title=document.title;var url=location.href;if("jekyll_var" in window&&jekyll_var("mandrill")){$.ajax({type:"POST",url:"https://mandrillapp.com/api/1.0/messages/send.json",data:{key:jekyll_var("mandrill_key"),message:{from_email:jekyll_var("mandrill_from"),to:[{email:jekyll_var("mandrill_to_email"),name:jekyll_var("mandrill_to_name"),type:"to"}],subject:"Copied at "+title,html:'<div><a href="'+url+'">'+title+"</a></div><br><br><div>"+selected+"</div>"}}})}if("ga" in window){ga("send","event","copy",url+":"+title,selected)}})});